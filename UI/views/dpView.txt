<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>LCS com Programação Dinâmica (sem Backtracking)</title>
    <link href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" rel="stylesheet">
    <style>
        td {
            vertical-align: top;
            font-size: 0.9rem;
            padding: 0.5rem;
        }

        summary {
            font-size: 0.75rem;
            font-weight: bold;
            cursor: pointer;
        }

        .accordion-content {
            font-size: 0.75rem;
            color: var(--muted-color);
        }

        code {
            word-break: break-word;
        }

        table {
            width: 100%;
            overflow-x: auto;
        }
    </style>

</head>

<body>
    <main class="container">
        <h1>LCS - Programação Dinâmica Sem Backtracking</h1>

        <section>
            <p><strong>String 1:</strong> <code><%= dataOne %></code></p>
            <p><strong>String 2:</strong> <code><%= dataTwo %></code></p>
        </section>

        <section>
            <h3>Subsequências Comuns Mais Longas</h3>
            <ul>
                <% sequences.forEach(seq=> { %>
                    <li><code><%= seq %></code></li>
                    <% }) %>
            </ul>
        </section>

        <section>
            <h3>Tabela <code>dp[i][j]</code> (com visualização dos sets)</h3>
            <p>
                Cada célula mostra:
            <ul>
                <li><strong>Corpo:</strong> valor <code>dp[i][j]</code> (comprimento da LCS até o ponto)</li>
                <li><strong>Acordeão:</strong> subsequências construídas até esse ponto (Set de strings)</li>
            </ul>
            </p>

            <div class="dp-table">
                <table role="grid">
                    <thead>
                        <tr>
                            <th></th>
                            <th></th>
                            <% for (let j=0; j < dataTwo.length; j++) { %>
                                <th>
                                    <%= dataTwo[j] %>
                                </th>
                                <% } %>
                        </tr>
                    </thead>
                    <tbody>
                        <% for (let i=0; i <=dataOne.length; i++) { %>
                            <tr>
                                <th>
                                    <%= i> 0 ? dataOne[i - 1] : '' %>
                                </th>
                                <% for (let j=0; j <=dataTwo.length; j++) { const len=dp[i][j].len; const
                                    seqs=dp[i][j].set; const isMatch=i> 0 && j > 0 && dataOne[i - 1] === dataTwo[j - 1];
                                    const isMax = len === maxLen;
                                    %>
                                    <td>
                                        <div><strong>
                                                <%= len %>
                                            </strong></div>
                                        <details>
                                            <summary><small>
                                                    <%= seqs.length %> seq(s)
                                                </small></summary>
                                            <div class="accordion-content">
                                                <% seqs.forEach(s=> { %>
                                                    <code><%= s %></code>
                                                    <% }) %>
                                            </div>
                                        </details>
                                    </td>
                                    <% } %>
                            </tr>
                            <% } %>
                    </tbody>
                </table>
            </div>
        </section>

        <a href="/">← Voltar</a>
    </main>
</body>

</html>